/* Generated by the Nim Compiler v2.3.1 */
var framePtr = null;
var excHandler = 0;
var lastJSError = null;
var NTI671089031 = {size: 0, kind: 16, base: null, node: null, finalizer: null};
var NTI671089030 = {size: 0, kind: 18, base: null, node: null, finalizer: null};
var NTI33554446 = {size: 0,kind: 37,base: null,node: null,finalizer: null};
var NTI671089019 = {size: 0, kind: 16, base: null, node: null, finalizer: null};
var NTI671089018 = {size: 0, kind: 18, base: null, node: null, finalizer: null};
NTI671089019.base = NTI33554446;
var NNI671089018 = {kind: 1, offset: "arr", len: 0, typ: NTI671089019, name: "arr", sons: null};
NTI671089018.node = NNI671089018;
NTI671089031.base = NTI33554446;
var NNI671089030 = {kind: 1, offset: "arr", len: 0, typ: NTI671089031, name: "arr", sons: null};
NTI671089030.node = NNI671089030;

function setConstr() {
        var result = {};
    for (var i = 0; i < arguments.length; ++i) {
      var x = arguments[i];
      if (typeof(x) == "object") {
        for (var j = x[0]; j <= x[1]; ++j) {
          result[j] = true;
        }
      } else {
        result[x] = true;
      }
    }
    return result;
  

  
}
var ConstSet1 = setConstr(17, 16, 4, 18, 27, 19, 23, 22, 21);

function nimCopy(dest_p0, src_p1, ti_p2) {
  var result_33557329 = null;

    switch (ti_p2.kind) {
    case 21:
    case 22:
    case 23:
    case 5:
      if (!(isFatPointer__system_u2877(ti_p2))) {
      result_33557329 = src_p1;
      }
      else {
        result_33557329 = [src_p1[0], src_p1[1]];
      }
      
      break;
    case 19:
            if (dest_p0 === null || dest_p0 === undefined) {
        dest_p0 = {};
      }
      else {
        for (var key in dest_p0) { delete dest_p0[key]; }
      }
      for (var key in src_p1) { dest_p0[key] = src_p1[key]; }
      result_33557329 = dest_p0;
    
      break;
    case 18:
    case 17:
      if (!((ti_p2.base == null))) {
      result_33557329 = nimCopy(dest_p0, src_p1, ti_p2.base);
      }
      else {
      if ((ti_p2.kind == 17)) {
      result_33557329 = (dest_p0 === null || dest_p0 === undefined) ? {m_type: ti_p2} : dest_p0;
      }
      else {
        result_33557329 = (dest_p0 === null || dest_p0 === undefined) ? {} : dest_p0;
      }
      }
      nimCopyAux(result_33557329, src_p1, ti_p2.node);
      break;
    case 4:
    case 16:
            if(ArrayBuffer.isView(src_p1)) { 
        if(dest_p0 === null || dest_p0 === undefined || dest_p0.length != src_p1.length) {
          dest_p0 = new src_p1.constructor(src_p1);
        } else {
          dest_p0.set(src_p1, 0);
        }
        result_33557329 = dest_p0;
      } else {
        if (src_p1 === null) {
          result_33557329 = null;
        }
        else {
          if (dest_p0 === null || dest_p0 === undefined || dest_p0.length != src_p1.length) {
            dest_p0 = new Array(src_p1.length);
          }
          result_33557329 = dest_p0;
          for (var i = 0; i < src_p1.length; ++i) {
            result_33557329[i] = nimCopy(result_33557329[i], src_p1[i], ti_p2.base);
          }
        }
      }
    
      break;
    case 24:
    case 27:
            if (src_p1 === null) {
        result_33557329 = null;
      }
      else {
        if (dest_p0 === null || dest_p0 === undefined || dest_p0.length != src_p1.length) {
          dest_p0 = new Array(src_p1.length);
        }
        result_33557329 = dest_p0;
        for (var i = 0; i < src_p1.length; ++i) {
          result_33557329[i] = nimCopy(result_33557329[i], src_p1[i], ti_p2.base);
        }
      }
    
      break;
    case 28:
            if (src_p1 !== null) {
        result_33557329 = src_p1.slice(0);
      }
    
      break;
    default: 
      result_33557329 = src_p1;
      break;
    }

  return result_33557329;

}

function len(l_p0) {
  var result_536872012 = 0;

    result_536872012 = (l_p0.nodes).length;

  return result_536872012;

}

function clear(l_p0) {
    if (l_p0.nodes.length < 0) { for (var i = l_p0.nodes.length ; i < 0 ; ++i) l_p0.nodes.push(({isBreak: false, isSkipXAxis: false, boxFlags: 0, anchorFlags: 0, id: 0, firstChild: 0, lastChild: 0, prevSibling: 0, nextSibling: 0, computed: ({arr: new Float32Array(4)}), margin: ({arr: new Float32Array(4)}), size: ({arr: new Float32Array(2)}), childOffset: 0, childCount: 0})); }
               else { l_p0.nodes.length = 0; };

  
}

function firstChild(l_p0, nodeID_p1) {
  var result_536872077 = 0;

  BeforeRet: {
    var l_536872091 = l_p0;
    var n_536872095 = l_536872091.nodes[((nodeID_p1 - 1) >>> 0)];
    if (!((n_536872095 == null))) {
    result_536872077 = n_536872095.firstChild;
    break BeforeRet;
    }
    
    result_536872077 = 0;
    break BeforeRet;
  };

  return result_536872077;

}

function lastChild(l_p0, nodeID_p1) {
  var result_536872102 = 0;

  BeforeRet: {
    var l_536872115 = l_p0;
    var n_536872119 = l_536872115.nodes[((nodeID_p1 - 1) >>> 0)];
    if (!((n_536872119 == null))) {
    result_536872102 = n_536872119.lastChild;
    break BeforeRet;
    }
    
    result_536872102 = 0;
    break BeforeRet;
  };

  return result_536872102;

}

function nextSibling(l_p0, nodeID_p1) {
  var result_536872126 = 0;

  BeforeRet: {
    var l_536872139 = l_p0;
    var n_536872143 = l_536872139.nodes[((nodeID_p1 - 1) >>> 0)];
    if (!((n_536872143 == null))) {
    result_536872126 = n_536872143.nextSibling;
    break BeforeRet;
    }
    
    result_536872126 = 0;
    break BeforeRet;
  };

  return result_536872126;

}

function node(l_p0) {
    var Temporary1;

  var result_536872173 = 0;

    var l_536872186 = l_p0;
    var len_536872190 = (l_536872186.nodes).length;
    if (l_536872186.nodes.length < (Temporary1 = (len_536872190 + 1), Temporary1)) { for (var i = l_536872186.nodes.length ; i < Temporary1 ; ++i) l_536872186.nodes.push(({isBreak: false, isSkipXAxis: false, boxFlags: 0, anchorFlags: 0, id: 0, firstChild: 0, lastChild: 0, prevSibling: 0, nextSibling: 0, computed: ({arr: new Float32Array(4)}), margin: ({arr: new Float32Array(4)}), size: ({arr: new Float32Array(2)}), childOffset: 0, childCount: 0})); }
               else { l_536872186.nodes.length = Temporary1; };
    var id_536872198 = (l_536872186.nodes).length;
    l_536872186.nodes[len_536872190].id = id_536872198;
    result_536872173 = id_536872198;

  return result_536872173;

}

function setBoxFlags(l_p0, nodeID_p1, boxFlags_p2) {
    var l_536872215 = l_p0;
    var n_536872219 = l_536872215.nodes[((nodeID_p1 - 1) >>> 0)];
    n_536872219.boxFlags = boxFlags_p2;

  
}

function setLayoutFlags(l_p0, nodeID_p1, layoutFlags_p2) {
    var l_536872236 = l_p0;
    var n_536872240 = l_536872236.nodes[((nodeID_p1 - 1) >>> 0)];
    n_536872240.anchorFlags = layoutFlags_p2;

  
}

function isFatPointer__system_u2877(ti_p0) {
  var result_33557311 = false;

  BeforeRet: {
    result_33557311 = !((ConstSet1[ti_p0.base.kind] != undefined));
    break BeforeRet;
  };

  return result_33557311;

}

function nimCopyAux(dest_p0, src_p1, n_p2) {
    switch (n_p2.kind) {
    case 0:
      break;
    case 1:
            dest_p0[n_p2.offset] = nimCopy(dest_p0[n_p2.offset], src_p1[n_p2.offset], n_p2.typ);
    
      break;
    case 2:
          for (var i = 0; i < n_p2.sons.length; i++) {
      nimCopyAux(dest_p0, src_p1, n_p2.sons[i]);
    }
    
      break;
    case 3:
            dest_p0[n_p2.offset] = nimCopy(dest_p0[n_p2.offset], src_p1[n_p2.offset], n_p2.typ);
      for (var i = 0; i < n_p2.sons.length; ++i) {
        nimCopyAux(dest_p0, src_p1, n_p2.sons[i][1]);
      }
    
      break;
    }

  
}

function setSize(l_p0, nodeID_p1, size_p2) {
    var l_536872257 = l_p0;
    var n_536872261 = l_536872257.nodes[((nodeID_p1 - 1) >>> 0)];
    n_536872261.size = nimCopy(n_536872261.size, size_p2, NTI671089018);

  
}

function setMargin(l_p0, nodeID_p1, margin_p2) {
    var l_536872278 = l_p0;
    var n_536872282 = l_536872278.nodes[((nodeID_p1 - 1) >>> 0)];
    n_536872282.margin = nimCopy(n_536872282.margin, margin_p2, NTI671089030);

  
}

function isNil__buju_u85(id_p0) {
  var result_536870999 = false;

    result_536870999 = (id_p0 == 0);

  return result_536870999;

}

function lastChild__buju_u128(l_p0, n_p1) {
  var result_536871043 = null;

  BeforeRet: {
    var nodeID_536871044 = n_p1.lastChild;
    if (!(isNil__buju_u85(nodeID_536871044))) {
    result_536871043 = l_p0.nodes[((nodeID_536871044 - 1) >>> 0)];
    break BeforeRet;
    }
    
    result_536871043 = null;
    break BeforeRet;
  };

  return result_536871043;

}

function insertChild(l_p0, parentID_p1, childID_p2) {
    var l_536872299 = l_p0;
    var p_536872303 = l_536872299.nodes[((parentID_p1 - 1) >>> 0)];
    if (!(isNil__buju_u85(p_536872303.lastChild))) {
    var lastChild_536872304 = lastChild__buju_u128(l_536872299, p_536872303);
    lastChild_536872304.nextSibling = childID_p2;
    var node_536872308 = l_536872299.nodes[((childID_p2 - 1) >>> 0)];
    node_536872308.prevSibling = p_536872303.lastChild;
    p_536872303.lastChild = childID_p2;
    }
    else {
      p_536872303.firstChild = childID_p2;
      p_536872303.lastChild = childID_p2;
    }
    

  
}

function removeChild(l_p0, parentID_p1, childID_p2) {
  BeforeRet: {
    var l_536872325 = l_p0;
    var c_536872329 = l_536872325.nodes[((childID_p2 - 1) >>> 0)];
    var p_536872333 = l_536872325.nodes[((parentID_p1 - 1) >>> 0)];
    var p2_536872334 = c_536872329.prevSibling;
    var n2_536872335 = c_536872329.nextSibling;
    if ((n2_536872335 == p2_536872334)) {
    if (!(isNil__buju_u85(n2_536872335))) {
    c_536872329.prevSibling = 0;
    c_536872329.nextSibling = 0;
    var n_536872343 = l_536872325.nodes[((n2_536872335 - 1) >>> 0)];
    n_536872343.prevSibling = 0;
    n_536872343.nextSibling = 0;
    }
    
    p_536872333.lastChild = 0;
    p_536872333.firstChild = 0;
    break BeforeRet;
    }
    
    if ((p_536872333.firstChild == childID_p2)) {
    p_536872333.firstChild = n2_536872335;
    }
    
    if ((p_536872333.lastChild == childID_p2)) {
    p_536872333.lastChild = p2_536872334;
    }
    
    if (!(isNil__buju_u85(n2_536872335))) {
    var n_536872355 = l_536872325.nodes[((n2_536872335 - 1) >>> 0)];
    n_536872355.prevSibling = p2_536872334;
    c_536872329.nextSibling = 0;
    }
    
    if (!(isNil__buju_u85(p2_536872334))) {
    var n_536872359 = l_536872325.nodes[((p2_536872334 - 1) >>> 0)];
    n_536872359.nextSibling = n2_536872335;
    c_536872329.prevSibling = 0;
    }
    
  };

  
}

function max__system_u1192(x_p0, y_p1) {
    var Temporary1;

  var result_33555627 = 0.0;

    if (((y_p1 <= x_p0) || !((y_p1 == y_p1)))) {
    Temporary1 = x_p0;
    }
    else {
    Temporary1 = y_p1;
    }
    
    result_33555627 = Temporary1;

  return result_33555627;

}

function calcOverlayedSize__buju_u346(l_p0, n_p1) {
  var result_536871263 = 0.0;

    var needSize_536871265 = 0.0;
    Label1: {
      var idx_536871266 = 0;
      var colontmp__536872410 = 0;
      colontmp__536872410 = ((n_p1.childOffset + n_p1.childCount) >>> 0);
      var res_536872412 = n_p1.childOffset;
      Label2: {
          Label3: while (true) {
          if (!(res_536872412 < colontmp__536872410)) break Label3;
            idx_536871266 = res_536872412;
            var child_536871267 = l_p0.sorted[idx_536871266];
            var size_536871271 = ((child_536871267.computed.arr[0] + child_536871267.computed.arr[2]) + child_536871267.margin.arr[2]);
            needSize_536871265 = max__system_u1192(size_536871271, needSize_536871265);
            res_536872412 = ((res_536872412 + 1) >>> 0);
          }
      };
    };
    result_536871263 = needSize_536871265;

  return result_536871263;

}

function calcWrappedStackedSize__buju_u360(l_p0, n_p1) {
  var result_536871277 = 0.0;

    var needSize_536871279 = 0.0;
    var needSize2_536871280 = 0.0;
    Label1: {
      var idx_536871281 = 0;
      var colontmp__536872415 = 0;
      colontmp__536872415 = ((n_p1.childOffset + n_p1.childCount) >>> 0);
      var res_536872416 = n_p1.childOffset;
      Label2: {
          Label3: while (true) {
          if (!(res_536872416 < colontmp__536872415)) break Label3;
            idx_536871281 = res_536872416;
            var child_536871282 = l_p0.sorted[idx_536871281];
            if (child_536871282.isBreak) {
            needSize2_536871280 = max__system_u1192(needSize2_536871280, needSize_536871279);
            needSize_536871279 = 0.0;
            }
            
            var size_536871286 = ((child_536871282.computed.arr[0] + child_536871282.computed.arr[2]) + child_536871282.margin.arr[2]);
            needSize_536871279 = (needSize_536871279 + size_536871286);
            res_536872416 = ((res_536872416 + 1) >>> 0);
          }
      };
    };
    result_536871277 = max__system_u1192(needSize2_536871280, needSize_536871279);

  return result_536871277;

}

function calcStackedSize__buju_u375(l_p0, n_p1) {
  var result_536871292 = 0.0;

    var needSize_536871294 = 0.0;
    Label1: {
      var idx_536871295 = 0;
      var colontmp__536872419 = 0;
      colontmp__536872419 = ((n_p1.childOffset + n_p1.childCount) >>> 0);
      var res_536872420 = n_p1.childOffset;
      Label2: {
          Label3: while (true) {
          if (!(res_536872420 < colontmp__536872419)) break Label3;
            idx_536871295 = res_536872420;
            var child_536871296 = l_p0.sorted[idx_536871295];
            var size_536871300 = ((child_536871296.computed.arr[0] + child_536871296.computed.arr[2]) + child_536871296.margin.arr[2]);
            needSize_536871294 = (needSize_536871294 + size_536871300);
            res_536872420 = ((res_536872420 + 1) >>> 0);
          }
      };
    };
    result_536871292 = needSize_536871294;

  return result_536871292;

}

function calcSize__buju_u326(l_p0) {
            var Temporary4;
              var Temporary5;

    var idx_536871246 = (l_p0.sorted).length;
    Label1: {
        Label2: while (true) {
        if (!(0 < idx_536871246)) break Label2;
          Label3: {
            idx_536871246 -= 1;
            var n_536871252 = l_p0.sorted[idx_536871246];
            n_536871252.computed.arr[0] = n_536871252.margin.arr[0];
            if ((0.0 < n_536871252.size.arr[0])) {
            n_536871252.computed.arr[2] = n_536871252.size.arr[0];
            break Label3;
            }
            
            if (            (((n_536871252.boxFlags & 7)) | 0) == 7            ){              Temporary4 = calcOverlayedSize__buju_u346(l_p0, n_536871252);
              }
            else if (            (((n_536871252.boxFlags & 7)) | 0) == 6            ){              Temporary4 = calcWrappedStackedSize__buju_u360(l_p0, n_536871252);
              }
            else if (            (((n_536871252.boxFlags & 7)) | 0) == 3 || 
            (((n_536871252.boxFlags & 7)) | 0) == 2            ){              if (((((n_536871252.boxFlags & 1)) | 0) == 0)) {
              Temporary5 = calcStackedSize__buju_u375(l_p0, n_536871252);
              }
              else {
              Temporary5 = calcOverlayedSize__buju_u346(l_p0, n_536871252);
              }
              
              Temporary4 = Temporary5;
              }
            else{
              Temporary4 = calcOverlayedSize__buju_u346(l_p0, n_536871252);
              }
            var needSize_536871311 = Temporary4;
            n_536871252.computed.arr[2] = needSize_536871311;
          };
        }
    };

  
}

function HEX2BHEX3D__buju_u487(x_p0, x_p0_Idx, y_p1) {
    x_p0[x_p0_Idx] = (x_p0[x_p0_Idx] + y_p1);

  
}

function min__system_u1159(x_p0, y_p1) {
    var Temporary1;

  var result_33555594 = 0.0;

    if (((x_p0 <= y_p1) || !((y_p1 == y_p1)))) {
    Temporary1 = x_p0;
    }
    else {
    Temporary1 = y_p1;
    }
    
    result_33555594 = Temporary1;

  return result_33555594;

}

function arrangeStacked__buju_u423(l_p0, n_p1) {
    var computed_536871343 = nimCopy(null, n_p1.computed, NTI671089030);
    var space_536871345 = computed_536871343.arr[3];
    var arrangeRangeBegin_536871346 = n_p1.childOffset;
    var arrangeRangeEnd_536871347 = ((n_p1.childOffset + n_p1.childCount) >>> 0);
    var maxX2_536871349 = (computed_536871343.arr[1] + space_536871345);
    Label1: {
        Label2: while (true) {
        if (!!((arrangeRangeBegin_536871346 == arrangeRangeEnd_536871347))) break Label2;
          var used_536871350 = 0.0;
          var count_536871351 = 0;
          var squeezedCount_536871352 = 0;
          var total_536871353 = 0;
          var itemCount_536871354 = 0;
          var expandRangeEnd_536871355 = arrangeRangeEnd_536871347;
          Label3: {
            var idx_536871356 = 0;
            var res_536872428 = arrangeRangeBegin_536871346;
            Label4: {
                Label5: while (true) {
                if (!(res_536872428 < arrangeRangeEnd_536871347)) break Label5;
                  idx_536871356 = res_536872428;
                  var child_536871357 = l_p0.sorted[idx_536871356];
                  itemCount_536871354 += 1;
                  var extend_536871365 = ((used_536871350 + child_536871357.computed.arr[1]) + child_536871357.margin.arr[3]);
                  if (((((((child_536871357.anchorFlags & 31)) | 0) >> 1) & 5) == 5)) {
                  count_536871351 += 1;
                  }
                  else {
                    if ((child_536871357.size.arr[1] <= 0.0)) {
                    squeezedCount_536871352 += 1;
                    }
                    
                    extend_536871365 = (extend_536871365 + child_536871357.computed.arr[3]);
                  }
                  
                  if (((0 < total_536871353) && (space_536871345 < extend_536871365))) {
                  expandRangeEnd_536871355 = idx_536871356;
                  child_536871357.isBreak = true;
                  itemCount_536871354 = 0;
                  break Label3;
                  }
                  
                  total_536871353 += 1;
                  used_536871350 = extend_536871365;
                  res_536872428 = ((res_536872428 + 1) >>> 0);
                }
            };
          };
          var extraSpace_536871388 = (space_536871345 - used_536871350);
          var filler_536871389 = 0.0;
          var spacer_536871390 = 0.0;
          var extraMargin_536871391 = 0.0;
          var eater_536871392 = 0.0;
          if ((0.0 < extraSpace_536871388)) {
          if ((0 < count_536871351)) {
          filler_536871389 = (extraSpace_536871388 / count_536871351);
          }
          else {
          if ((0 < total_536871353)) {
          if (          (n_p1.boxFlags & 24) == 24          ){            if ((false || ((0 < itemCount_536871354) || !((expandRangeEnd_536871355 == arrangeRangeEnd_536871347))))) {
            spacer_536871390 = (extraSpace_536871388 / (total_536871353 - 1));
            }
            
            }
          else if (          (n_p1.boxFlags & 24) == 8          ){            }
          else if (          (n_p1.boxFlags & 24) == 16          ){            extraMargin_536871391 = extraSpace_536871388;
            }
          else{
            extraMargin_536871391 = (extraSpace_536871388 / 2.0);
            }
          }
          }
          }
          else {
          }
          
          var x_536871394 = [computed_536871343.arr[1]];
          var x1_536871395 = 0.0;
          Label6: {
            var idx_536871396 = 0;
            var res_536872431 = arrangeRangeBegin_536871346;
            Label7: {
                Label8: while (true) {
                if (!(res_536872431 < expandRangeEnd_536871355)) break Label8;
                  idx_536871396 = res_536872431;
                  var child_536871397 = l_p0.sorted[idx_536871396];
                  HEX2BHEX3D__buju_u487(x_536871394, 0, (child_536871397.computed.arr[1] + extraMargin_536871391));
                  if (((((((child_536871397.anchorFlags & 31)) | 0) >> 1) & 5) == 5)) {
                  x1_536871395 = (x_536871394[0] + filler_536871389);
                  }
                  else {
                  if ((0.0 < child_536871397.size.arr[1])) {
                  x1_536871395 = (x_536871394[0] + child_536871397.computed.arr[3]);
                  }
                  else {
                    x1_536871395 = (x_536871394[0] + max__system_u1192(0.0, (child_536871397.computed.arr[3] + eater_536871392)));
                  }
                  }
                  var ix0_536871411 = x_536871394[0];
                  var ix1_536871413 = min__system_u1159((maxX2_536871349 - child_536871397.margin.arr[3]), x1_536871395);
                  child_536871397.computed.arr[1] = ix0_536871411;
                  child_536871397.computed.arr[3] = (ix1_536871413 - ix0_536871411);
                  extraMargin_536871391 = spacer_536871390;
                  x_536871394[0] = (x1_536871395 + child_536871397.margin.arr[3]);
                  res_536872431 = ((res_536872431 + 1) >>> 0);
                }
            };
          };
          arrangeRangeBegin_536871346 = expandRangeEnd_536871355;
        }
    };

  
}

function max__system_u1196(x_p0, y_p1) {
    var Temporary1;

  var result_33555631 = 0.0;

    if (((y_p1 <= x_p0) || !((y_p1 == y_p1)))) {
    Temporary1 = x_p0;
    }
    else {
    Temporary1 = y_p1;
    }
    
    result_33555631 = Temporary1;

  return result_33555631;

}

function min__system_u1163(x_p0, y_p1) {
    var Temporary1;

  var result_33555598 = 0.0;

    if (((x_p0 <= y_p1) || !((y_p1 == y_p1)))) {
    Temporary1 = x_p0;
    }
    else {
    Temporary1 = y_p1;
    }
    
    result_33555598 = Temporary1;

  return result_33555598;

}

function arrangeOverlaySqueezedRange__buju_u518(l_p0, squeezedRangeBegin_p2, arrangeRangeEnd_p3, offset_p4, space_p5) {
    Label1: {
      var idx_536871439 = 0;
      var res_536872438 = squeezedRangeBegin_p2;
      Label2: {
          Label3: while (true) {
          if (!(res_536872438 < arrangeRangeEnd_p3)) break Label3;
            idx_536871439 = res_536872438;
            var child_536871440 = l_p0.sorted[idx_536871439];
            var minSize_536871443 = max__system_u1196(0.0, ((space_p5 - child_536871440.computed.arr[0]) - child_536871440.margin.arr[2]));
            if (            (((((child_536871440.anchorFlags & 31)) | 0) >> 0) & 5) == 5            ){              child_536871440.computed.arr[2] = minSize_536871443;
              }
            else if (            (((((child_536871440.anchorFlags & 31)) | 0) >> 0) & 5) == 1            ){              child_536871440.computed.arr[2] = min__system_u1163(child_536871440.computed.arr[2], minSize_536871443);
              }
            else if (            (((((child_536871440.anchorFlags & 31)) | 0) >> 0) & 5) == 4            ){              child_536871440.computed.arr[2] = min__system_u1163(child_536871440.computed.arr[2], minSize_536871443);
              child_536871440.computed.arr[0] = ((space_p5 - child_536871440.computed.arr[2]) - child_536871440.margin.arr[2]);
              }
            else{
              child_536871440.computed.arr[2] = min__system_u1163(child_536871440.computed.arr[2], minSize_536871443);
              child_536871440.computed.arr[0] = (child_536871440.computed.arr[0] + max__system_u1196(0.0, (((space_p5 - child_536871440.computed.arr[2]) / 2.0) - child_536871440.margin.arr[2])));
              }
            child_536871440.computed.arr[0] = (child_536871440.computed.arr[0] + offset_p4);
            res_536872438 = ((res_536872438 + 1) >>> 0);
          }
      };
    };

  
}

function arrangeWrappedOverlaySqueezed__buju_u505(l_p0, n_p1) {
  var result_536871422 = 0.0;

    var offset_536871425 = n_p1.computed.arr[0];
    var needSize_536871426 = 0.0;
    var squeezedRangeBegin_536871427 = n_p1.childOffset;
    Label1: {
      var idx_536871428 = 0;
      var colontmp__536872434 = 0;
      colontmp__536872434 = ((n_p1.childOffset + n_p1.childCount) >>> 0);
      var res_536872435 = n_p1.childOffset;
      Label2: {
          Label3: while (true) {
          if (!(res_536872435 < colontmp__536872434)) break Label3;
            idx_536871428 = res_536872435;
            var child_536871429 = l_p0.sorted[idx_536871428];
            if (child_536871429.isBreak) {
            arrangeOverlaySqueezedRange__buju_u518(l_p0, squeezedRangeBegin_536871427, idx_536871428, offset_536871425, needSize_536871426);
            offset_536871425 = (offset_536871425 + needSize_536871426);
            squeezedRangeBegin_536871427 = idx_536871428;
            needSize_536871426 = 0.0;
            }
            
            var childSize_536871468 = ((child_536871429.computed.arr[0] + child_536871429.computed.arr[2]) + child_536871429.margin.arr[2]);
            needSize_536871426 = max__system_u1192(needSize_536871426, childSize_536871468);
            res_536872435 = ((res_536872435 + 1) >>> 0);
          }
      };
    };
    arrangeOverlaySqueezedRange__buju_u518(l_p0, squeezedRangeBegin_536871427, ((n_p1.childOffset + n_p1.childCount) >>> 0), offset_536871425, needSize_536871426);
    result_536871422 = (offset_536871425 + needSize_536871426);

  return result_536871422;

}

function arrangeOverlaySqueezedRange__buju_u581(l_p0, squeezedRangeBegin_p2, arrangeRangeEnd_p3, offset_p4, space_p5) {
    Label1: {
      var idx_536871502 = 0;
      var res_536872445 = squeezedRangeBegin_p2;
      Label2: {
          Label3: while (true) {
          if (!(res_536872445 < arrangeRangeEnd_p3)) break Label3;
            idx_536871502 = res_536872445;
            var child_536871503 = l_p0.sorted[idx_536871502];
            var minSize_536871506 = max__system_u1196(0.0, ((space_p5 - child_536871503.computed.arr[1]) - child_536871503.margin.arr[3]));
            if (            (((((child_536871503.anchorFlags & 31)) | 0) >> 1) & 5) == 5            ){              child_536871503.computed.arr[3] = minSize_536871506;
              }
            else if (            (((((child_536871503.anchorFlags & 31)) | 0) >> 1) & 5) == 1            ){              child_536871503.computed.arr[3] = min__system_u1163(child_536871503.computed.arr[3], minSize_536871506);
              }
            else if (            (((((child_536871503.anchorFlags & 31)) | 0) >> 1) & 5) == 4            ){              child_536871503.computed.arr[3] = min__system_u1163(child_536871503.computed.arr[3], minSize_536871506);
              child_536871503.computed.arr[1] = ((space_p5 - child_536871503.computed.arr[3]) - child_536871503.margin.arr[3]);
              }
            else{
              child_536871503.computed.arr[3] = min__system_u1163(child_536871503.computed.arr[3], minSize_536871506);
              child_536871503.computed.arr[1] = (child_536871503.computed.arr[1] + max__system_u1196(0.0, (((space_p5 - child_536871503.computed.arr[3]) / 2.0) - child_536871503.margin.arr[3])));
              }
            child_536871503.computed.arr[1] = (child_536871503.computed.arr[1] + offset_p4);
            res_536872445 = ((res_536872445 + 1) >>> 0);
          }
      };
    };

  
}

function arrangeWrappedOverlaySqueezed__buju_u568(l_p0, n_p1) {
  var result_536871485 = 0.0;

    var offset_536871488 = n_p1.computed.arr[1];
    var needSize_536871489 = 0.0;
    var squeezedRangeBegin_536871490 = n_p1.childOffset;
    Label1: {
      var idx_536871491 = 0;
      var colontmp__536872441 = 0;
      colontmp__536872441 = ((n_p1.childOffset + n_p1.childCount) >>> 0);
      var res_536872442 = n_p1.childOffset;
      Label2: {
          Label3: while (true) {
          if (!(res_536872442 < colontmp__536872441)) break Label3;
            idx_536871491 = res_536872442;
            var child_536871492 = l_p0.sorted[idx_536871491];
            if (child_536871492.isBreak) {
            arrangeOverlaySqueezedRange__buju_u581(l_p0, squeezedRangeBegin_536871490, idx_536871491, offset_536871488, needSize_536871489);
            offset_536871488 = (offset_536871488 + needSize_536871489);
            squeezedRangeBegin_536871490 = idx_536871491;
            needSize_536871489 = 0.0;
            }
            
            var childSize_536871531 = ((child_536871492.computed.arr[1] + child_536871492.computed.arr[3]) + child_536871492.margin.arr[3]);
            needSize_536871489 = max__system_u1192(needSize_536871489, childSize_536871531);
            res_536872442 = ((res_536872442 + 1) >>> 0);
          }
      };
    };
    arrangeOverlaySqueezedRange__buju_u581(l_p0, squeezedRangeBegin_536871490, ((n_p1.childOffset + n_p1.childCount) >>> 0), offset_536871488, needSize_536871489);
    result_536871485 = (offset_536871488 + needSize_536871489);

  return result_536871485;

}

function arrangeStacked__buju_u628(l_p0, n_p1) {
    var computed_536871548 = nimCopy(null, n_p1.computed, NTI671089030);
    var space_536871550 = computed_536871548.arr[2];
    var arrangeRangeBegin_536871551 = n_p1.childOffset;
    var arrangeRangeEnd_536871552 = ((n_p1.childOffset + n_p1.childCount) >>> 0);
    var maxX2_536871554 = (computed_536871548.arr[0] + space_536871550);
    Label1: {
        Label2: while (true) {
        if (!!((arrangeRangeBegin_536871551 == arrangeRangeEnd_536871552))) break Label2;
          var used_536871555 = 0.0;
          var count_536871556 = 0;
          var squeezedCount_536871557 = 0;
          var total_536871558 = 0;
          var itemCount_536871559 = 0;
          var expandRangeEnd_536871560 = arrangeRangeEnd_536871552;
          Label3: {
            var idx_536871561 = 0;
            var res_536872449 = arrangeRangeBegin_536871551;
            Label4: {
                Label5: while (true) {
                if (!(res_536872449 < arrangeRangeEnd_536871552)) break Label5;
                  idx_536871561 = res_536872449;
                  var child_536871562 = l_p0.sorted[idx_536871561];
                  itemCount_536871559 += 1;
                  var extend_536871570 = ((used_536871555 + child_536871562.computed.arr[0]) + child_536871562.margin.arr[2]);
                  if (((((((child_536871562.anchorFlags & 31)) | 0) >> 0) & 5) == 5)) {
                  count_536871556 += 1;
                  }
                  else {
                    if ((child_536871562.size.arr[0] <= 0.0)) {
                    squeezedCount_536871557 += 1;
                    }
                    
                    extend_536871570 = (extend_536871570 + child_536871562.computed.arr[2]);
                  }
                  
                  if (((0 < total_536871558) && (space_536871550 < extend_536871570))) {
                  expandRangeEnd_536871560 = idx_536871561;
                  child_536871562.isBreak = true;
                  itemCount_536871559 = 0;
                  break Label3;
                  }
                  
                  total_536871558 += 1;
                  used_536871555 = extend_536871570;
                  res_536872449 = ((res_536872449 + 1) >>> 0);
                }
            };
          };
          var extraSpace_536871593 = (space_536871550 - used_536871555);
          var filler_536871594 = 0.0;
          var spacer_536871595 = 0.0;
          var extraMargin_536871596 = 0.0;
          var eater_536871597 = 0.0;
          if ((0.0 < extraSpace_536871593)) {
          if ((0 < count_536871556)) {
          filler_536871594 = (extraSpace_536871593 / count_536871556);
          }
          else {
          if ((0 < total_536871558)) {
          if (          (n_p1.boxFlags & 24) == 24          ){            if ((false || ((0 < itemCount_536871559) || !((expandRangeEnd_536871560 == arrangeRangeEnd_536871552))))) {
            spacer_536871595 = (extraSpace_536871593 / (total_536871558 - 1));
            }
            
            }
          else if (          (n_p1.boxFlags & 24) == 8          ){            }
          else if (          (n_p1.boxFlags & 24) == 16          ){            extraMargin_536871596 = extraSpace_536871593;
            }
          else{
            extraMargin_536871596 = (extraSpace_536871593 / 2.0);
            }
          }
          }
          }
          else {
          }
          
          var x_536871599 = [computed_536871548.arr[0]];
          var x1_536871600 = 0.0;
          Label6: {
            var idx_536871601 = 0;
            var res_536872452 = arrangeRangeBegin_536871551;
            Label7: {
                Label8: while (true) {
                if (!(res_536872452 < expandRangeEnd_536871560)) break Label8;
                  idx_536871601 = res_536872452;
                  var child_536871602 = l_p0.sorted[idx_536871601];
                  HEX2BHEX3D__buju_u487(x_536871599, 0, (child_536871602.computed.arr[0] + extraMargin_536871596));
                  if (((((((child_536871602.anchorFlags & 31)) | 0) >> 0) & 5) == 5)) {
                  x1_536871600 = (x_536871599[0] + filler_536871594);
                  }
                  else {
                  if ((0.0 < child_536871602.size.arr[0])) {
                  x1_536871600 = (x_536871599[0] + child_536871602.computed.arr[2]);
                  }
                  else {
                    x1_536871600 = (x_536871599[0] + max__system_u1192(0.0, (child_536871602.computed.arr[2] + eater_536871597)));
                  }
                  }
                  var ix0_536871616 = x_536871599[0];
                  var ix1_536871618 = min__system_u1159((maxX2_536871554 - child_536871602.margin.arr[2]), x1_536871600);
                  child_536871602.computed.arr[0] = ix0_536871616;
                  child_536871602.computed.arr[2] = (ix1_536871618 - ix0_536871616);
                  extraMargin_536871596 = spacer_536871595;
                  x_536871599[0] = (x1_536871600 + child_536871602.margin.arr[2]);
                  res_536872452 = ((res_536872452 + 1) >>> 0);
                }
            };
          };
          arrangeRangeBegin_536871551 = expandRangeEnd_536871560;
        }
    };

  
}

function arrangeStacked__buju_u710(l_p0, n_p1) {
    var computed_536871630 = nimCopy(null, n_p1.computed, NTI671089030);
    var space_536871632 = computed_536871630.arr[2];
    var arrangeRangeBegin_536871633 = n_p1.childOffset;
    var arrangeRangeEnd_536871634 = ((n_p1.childOffset + n_p1.childCount) >>> 0);
    Label1: {
        Label2: while (true) {
        if (!!((arrangeRangeBegin_536871633 == arrangeRangeEnd_536871634))) break Label2;
          var used_536871635 = 0.0;
          var count_536871636 = 0;
          var squeezedCount_536871637 = 0;
          var total_536871638 = 0;
          var itemCount_536871639 = 0;
          var expandRangeEnd_536871640 = arrangeRangeEnd_536871634;
          Label3: {
            var idx_536871641 = 0;
            var res_536872456 = arrangeRangeBegin_536871633;
            Label4: {
                Label5: while (true) {
                if (!(res_536872456 < arrangeRangeEnd_536871634)) break Label5;
                  idx_536871641 = res_536872456;
                  var child_536871642 = l_p0.sorted[idx_536871641];
                  itemCount_536871639 += 1;
                  var extend_536871650 = ((used_536871635 + child_536871642.computed.arr[0]) + child_536871642.margin.arr[2]);
                  if (((((((child_536871642.anchorFlags & 31)) | 0) >> 0) & 5) == 5)) {
                  count_536871636 += 1;
                  }
                  else {
                    if ((child_536871642.size.arr[0] <= 0.0)) {
                    squeezedCount_536871637 += 1;
                    }
                    
                    extend_536871650 = (extend_536871650 + child_536871642.computed.arr[2]);
                  }
                  
                  total_536871638 += 1;
                  used_536871635 = extend_536871650;
                  res_536872456 = ((res_536872456 + 1) >>> 0);
                }
            };
          };
          var extraSpace_536871673 = (space_536871632 - used_536871635);
          var filler_536871674 = 0.0;
          var spacer_536871675 = 0.0;
          var extraMargin_536871676 = 0.0;
          var eater_536871677 = 0.0;
          if ((0.0 < extraSpace_536871673)) {
          if ((0 < count_536871636)) {
          filler_536871674 = (extraSpace_536871673 / count_536871636);
          }
          else {
          if ((0 < total_536871638)) {
          if (          (n_p1.boxFlags & 24) == 24          ){            if ((true || ((0 < itemCount_536871639) || !((expandRangeEnd_536871640 == arrangeRangeEnd_536871634))))) {
            spacer_536871675 = (extraSpace_536871673 / (total_536871638 - 1));
            }
            
            }
          else if (          (n_p1.boxFlags & 24) == 8          ){            }
          else if (          (n_p1.boxFlags & 24) == 16          ){            extraMargin_536871676 = extraSpace_536871673;
            }
          else{
            extraMargin_536871676 = (extraSpace_536871673 / 2.0);
            }
          }
          }
          }
          else {
            if (((extraSpace_536871673 < 0.0) && (0 < squeezedCount_536871637))) {
            eater_536871677 = (extraSpace_536871673 / squeezedCount_536871637);
            }
            
          }
          
          var x_536871679 = [computed_536871630.arr[0]];
          var x1_536871680 = 0.0;
          Label6: {
            var idx_536871681 = 0;
            var res_536872459 = arrangeRangeBegin_536871633;
            Label7: {
                Label8: while (true) {
                if (!(res_536872459 < expandRangeEnd_536871640)) break Label8;
                  idx_536871681 = res_536872459;
                  var child_536871682 = l_p0.sorted[idx_536871681];
                  HEX2BHEX3D__buju_u487(x_536871679, 0, (child_536871682.computed.arr[0] + extraMargin_536871676));
                  if (((((((child_536871682.anchorFlags & 31)) | 0) >> 0) & 5) == 5)) {
                  x1_536871680 = (x_536871679[0] + filler_536871674);
                  }
                  else {
                  if ((0.0 < child_536871682.size.arr[0])) {
                  x1_536871680 = (x_536871679[0] + child_536871682.computed.arr[2]);
                  }
                  else {
                    x1_536871680 = (x_536871679[0] + max__system_u1192(0.0, (child_536871682.computed.arr[2] + eater_536871677)));
                  }
                  }
                  var ix0_536871696 = x_536871679[0];
                  var ix1_536871697 = x1_536871680;
                  child_536871682.computed.arr[0] = ix0_536871696;
                  child_536871682.computed.arr[2] = (ix1_536871697 - ix0_536871696);
                  extraMargin_536871676 = spacer_536871675;
                  x_536871679[0] = (x1_536871680 + child_536871682.margin.arr[2]);
                  res_536872459 = ((res_536872459 + 1) >>> 0);
                }
            };
          };
          arrangeRangeBegin_536871633 = expandRangeEnd_536871640;
        }
    };

  
}

function arrangeOverlay__buju_u799(l_p0, n_p1) {
    var offset_536871718 = n_p1.computed.arr[0];
    var space_536871720 = n_p1.computed.arr[2];
    Label1: {
      var idx_536871721 = 0;
      var colontmp__536872462 = 0;
      colontmp__536872462 = ((n_p1.childOffset + n_p1.childCount) >>> 0);
      var res_536872463 = n_p1.childOffset;
      Label2: {
          Label3: while (true) {
          if (!(res_536872463 < colontmp__536872462)) break Label3;
            idx_536871721 = res_536872463;
            var child_536871722 = l_p0.sorted[idx_536871721];
            if (            (((((child_536871722.anchorFlags & 31)) | 0) >> 0) & 5) == 5            ){              child_536871722.computed.arr[2] = max__system_u1192(0.0, ((space_536871720 - child_536871722.computed.arr[0]) - child_536871722.margin.arr[2]));
              }
            else if (            (((((child_536871722.anchorFlags & 31)) | 0) >> 0) & 5) == 4            ){              child_536871722.computed.arr[0] = ((((child_536871722.computed.arr[0] + space_536871720) - child_536871722.computed.arr[2]) - child_536871722.margin.arr[0]) - child_536871722.margin.arr[2]);
              }
            else if (            (((((child_536871722.anchorFlags & 31)) | 0) >> 0) & 5) == 1            ){              }
            else{
              child_536871722.computed.arr[0] = (child_536871722.computed.arr[0] + max__system_u1192(0.0, (((space_536871720 - child_536871722.computed.arr[2]) / 2.0) - child_536871722.margin.arr[2])));
              }
            child_536871722.computed.arr[0] = (child_536871722.computed.arr[0] + offset_536871718);
            res_536872463 = ((res_536872463 + 1) >>> 0);
          }
      };
    };

  
}

function arrange__buju_u414(l_p0, n_p1) {
    if (    (((n_p1.boxFlags & 7)) | 0) == 7    ){      if (false) {
      arrangeStacked__buju_u423(l_p0, n_p1);
      var offset_536871477 = arrangeWrappedOverlaySqueezed__buju_u505(l_p0, n_p1);
      n_p1.computed.arr[2] = (offset_536871477 - n_p1.computed.arr[0]);
      }
      
      }
    else if (    (((n_p1.boxFlags & 7)) | 0) == 6    ){      if (false) {
      (arrangeWrappedOverlaySqueezed__buju_u568(l_p0, n_p1));
      }
      else {
      arrangeStacked__buju_u628(l_p0, n_p1);
      }
      
      }
    else if (    (((n_p1.boxFlags & 7)) | 0) == 3 || 
    (((n_p1.boxFlags & 7)) | 0) == 2    ){      if (((((n_p1.boxFlags & 1)) | 0) == 0)) {
      arrangeStacked__buju_u710(l_p0, n_p1);
      }
      else {
      arrangeOverlaySqueezedRange__buju_u518(l_p0, n_p1.childOffset, ((n_p1.childOffset + n_p1.childCount) >>> 0), n_p1.computed.arr[0], n_p1.computed.arr[2]);
      }
      
      }
    else{
      arrangeOverlay__buju_u799(l_p0, n_p1);
      }

  
}

function arrange__buju_u401(l_p0) {
    Label1: {
      var idx_536871324 = 0;
      var colontmp__536872423 = 0;
      colontmp__536872423 = (l_p0.sorted).length;
      var i_536872424 = 0;
      Label2: {
          Label3: while (true) {
          if (!(i_536872424 < colontmp__536872423)) break Label3;
            idx_536871324 = i_536872424;
            var n_536871325 = l_p0.sorted[idx_536871324];
            if (!(n_536871325.isSkipXAxis)) {
            arrange__buju_u414(l_p0, n_536871325);
            }
            
            i_536872424 += 1;
          }
      };
    };

  
}

function calcStackedSize__buju_u850(l_p0, n_p1) {
  var result_536871767 = 0.0;

    var needSize_536871769 = 0.0;
    Label1: {
      var idx_536871770 = 0;
      var colontmp__536872468 = 0;
      colontmp__536872468 = ((n_p1.childOffset + n_p1.childCount) >>> 0);
      var res_536872469 = n_p1.childOffset;
      Label2: {
          Label3: while (true) {
          if (!(res_536872469 < colontmp__536872468)) break Label3;
            idx_536871770 = res_536872469;
            var child_536871771 = l_p0.sorted[idx_536871770];
            var size_536871775 = ((child_536871771.computed.arr[1] + child_536871771.computed.arr[3]) + child_536871771.margin.arr[3]);
            needSize_536871769 = (needSize_536871769 + size_536871775);
            res_536872469 = ((res_536872469 + 1) >>> 0);
          }
      };
    };
    result_536871767 = needSize_536871769;

  return result_536871767;

}

function calcWrappedOverlayedSize__buju_u864(l_p0, n_p1) {
  var result_536871781 = 0.0;

    var needSize_536871783 = 0.0;
    var needSize2_536871784 = 0.0;
    Label1: {
      var idx_536871785 = 0;
      var colontmp__536872472 = 0;
      colontmp__536872472 = ((n_p1.childOffset + n_p1.childCount) >>> 0);
      var res_536872473 = n_p1.childOffset;
      Label2: {
          Label3: while (true) {
          if (!(res_536872473 < colontmp__536872472)) break Label3;
            idx_536871785 = res_536872473;
            var child_536871786 = l_p0.sorted[idx_536871785];
            if (child_536871786.isBreak) {
            needSize2_536871784 = (needSize2_536871784 + needSize_536871783);
            needSize_536871783 = 0.0;
            }
            
            var size_536871790 = ((child_536871786.computed.arr[1] + child_536871786.computed.arr[3]) + child_536871786.margin.arr[3]);
            needSize_536871783 = max__system_u1192(needSize_536871783, size_536871790);
            res_536872473 = ((res_536872473 + 1) >>> 0);
          }
      };
    };
    result_536871781 = (needSize_536871783 + needSize2_536871784);

  return result_536871781;

}

function calcOverlayedSize__buju_u884(l_p0, n_p1) {
  var result_536871801 = 0.0;

    var needSize_536871803 = 0.0;
    Label1: {
      var idx_536871804 = 0;
      var colontmp__536872476 = 0;
      colontmp__536872476 = ((n_p1.childOffset + n_p1.childCount) >>> 0);
      var res_536872477 = n_p1.childOffset;
      Label2: {
          Label3: while (true) {
          if (!(res_536872477 < colontmp__536872476)) break Label3;
            idx_536871804 = res_536872477;
            var child_536871805 = l_p0.sorted[idx_536871804];
            var size_536871809 = ((child_536871805.computed.arr[1] + child_536871805.computed.arr[3]) + child_536871805.margin.arr[3]);
            needSize_536871803 = max__system_u1192(size_536871809, needSize_536871803);
            res_536872477 = ((res_536872477 + 1) >>> 0);
          }
      };
    };
    result_536871801 = needSize_536871803;

  return result_536871801;

}

function calcSize__buju_u830(l_p0) {
            var Temporary4;
              var Temporary5;

    var idx_536871750 = (l_p0.sorted).length;
    Label1: {
        Label2: while (true) {
        if (!(0 < idx_536871750)) break Label2;
          Label3: {
            idx_536871750 -= 1;
            var n_536871756 = l_p0.sorted[idx_536871750];
            n_536871756.computed.arr[1] = n_536871756.margin.arr[1];
            if ((0.0 < n_536871756.size.arr[1])) {
            n_536871756.computed.arr[3] = n_536871756.size.arr[1];
            break Label3;
            }
            
            if (            (((n_536871756.boxFlags & 7)) | 0) == 7            ){              Temporary4 = calcStackedSize__buju_u850(l_p0, n_536871756);
              }
            else if (            (((n_536871756.boxFlags & 7)) | 0) == 6            ){              Temporary4 = calcWrappedOverlayedSize__buju_u864(l_p0, n_536871756);
              }
            else if (            (((n_536871756.boxFlags & 7)) | 0) == 3 || 
            (((n_536871756.boxFlags & 7)) | 0) == 2            ){              if (((((n_536871756.boxFlags & 1)) | 0) == 1)) {
              Temporary5 = calcStackedSize__buju_u850(l_p0, n_536871756);
              }
              else {
              Temporary5 = calcOverlayedSize__buju_u884(l_p0, n_536871756);
              }
              
              Temporary4 = Temporary5;
              }
            else{
              Temporary4 = calcOverlayedSize__buju_u884(l_p0, n_536871756);
              }
            var needSize_536871815 = Temporary4;
            n_536871756.computed.arr[3] = needSize_536871815;
          };
        }
    };

  
}

function arrangeStacked__buju_u954(l_p0, n_p1) {
    var computed_536871874 = nimCopy(null, n_p1.computed, NTI671089030);
    var space_536871876 = computed_536871874.arr[3];
    var arrangeRangeBegin_536871877 = n_p1.childOffset;
    var arrangeRangeEnd_536871878 = ((n_p1.childOffset + n_p1.childCount) >>> 0);
    Label1: {
        Label2: while (true) {
        if (!!((arrangeRangeBegin_536871877 == arrangeRangeEnd_536871878))) break Label2;
          var used_536871879 = 0.0;
          var count_536871880 = 0;
          var squeezedCount_536871881 = 0;
          var total_536871882 = 0;
          var itemCount_536871883 = 0;
          var expandRangeEnd_536871884 = arrangeRangeEnd_536871878;
          Label3: {
            var idx_536871885 = 0;
            var res_536872485 = arrangeRangeBegin_536871877;
            Label4: {
                Label5: while (true) {
                if (!(res_536872485 < arrangeRangeEnd_536871878)) break Label5;
                  idx_536871885 = res_536872485;
                  var child_536871886 = l_p0.sorted[idx_536871885];
                  itemCount_536871883 += 1;
                  var extend_536871894 = ((used_536871879 + child_536871886.computed.arr[1]) + child_536871886.margin.arr[3]);
                  if (((((((child_536871886.anchorFlags & 31)) | 0) >> 1) & 5) == 5)) {
                  count_536871880 += 1;
                  }
                  else {
                    if ((child_536871886.size.arr[1] <= 0.0)) {
                    squeezedCount_536871881 += 1;
                    }
                    
                    extend_536871894 = (extend_536871894 + child_536871886.computed.arr[3]);
                  }
                  
                  total_536871882 += 1;
                  used_536871879 = extend_536871894;
                  res_536872485 = ((res_536872485 + 1) >>> 0);
                }
            };
          };
          var extraSpace_536871917 = (space_536871876 - used_536871879);
          var filler_536871918 = 0.0;
          var spacer_536871919 = 0.0;
          var extraMargin_536871920 = 0.0;
          var eater_536871921 = 0.0;
          if ((0.0 < extraSpace_536871917)) {
          if ((0 < count_536871880)) {
          filler_536871918 = (extraSpace_536871917 / count_536871880);
          }
          else {
          if ((0 < total_536871882)) {
          if (          (n_p1.boxFlags & 24) == 24          ){            if ((true || ((0 < itemCount_536871883) || !((expandRangeEnd_536871884 == arrangeRangeEnd_536871878))))) {
            spacer_536871919 = (extraSpace_536871917 / (total_536871882 - 1));
            }
            
            }
          else if (          (n_p1.boxFlags & 24) == 8          ){            }
          else if (          (n_p1.boxFlags & 24) == 16          ){            extraMargin_536871920 = extraSpace_536871917;
            }
          else{
            extraMargin_536871920 = (extraSpace_536871917 / 2.0);
            }
          }
          }
          }
          else {
            if (((extraSpace_536871917 < 0.0) && (0 < squeezedCount_536871881))) {
            eater_536871921 = (extraSpace_536871917 / squeezedCount_536871881);
            }
            
          }
          
          var x_536871923 = [computed_536871874.arr[1]];
          var x1_536871924 = 0.0;
          Label6: {
            var idx_536871925 = 0;
            var res_536872488 = arrangeRangeBegin_536871877;
            Label7: {
                Label8: while (true) {
                if (!(res_536872488 < expandRangeEnd_536871884)) break Label8;
                  idx_536871925 = res_536872488;
                  var child_536871926 = l_p0.sorted[idx_536871925];
                  HEX2BHEX3D__buju_u487(x_536871923, 0, (child_536871926.computed.arr[1] + extraMargin_536871920));
                  if (((((((child_536871926.anchorFlags & 31)) | 0) >> 1) & 5) == 5)) {
                  x1_536871924 = (x_536871923[0] + filler_536871918);
                  }
                  else {
                  if ((0.0 < child_536871926.size.arr[1])) {
                  x1_536871924 = (x_536871923[0] + child_536871926.computed.arr[3]);
                  }
                  else {
                    x1_536871924 = (x_536871923[0] + max__system_u1192(0.0, (child_536871926.computed.arr[3] + eater_536871921)));
                  }
                  }
                  var ix0_536871940 = x_536871923[0];
                  var ix1_536871941 = x1_536871924;
                  child_536871926.computed.arr[1] = ix0_536871940;
                  child_536871926.computed.arr[3] = (ix1_536871941 - ix0_536871940);
                  extraMargin_536871920 = spacer_536871919;
                  x_536871923[0] = (x1_536871924 + child_536871926.margin.arr[3]);
                  res_536872488 = ((res_536872488 + 1) >>> 0);
                }
            };
          };
          arrangeRangeBegin_536871877 = expandRangeEnd_536871884;
        }
    };

  
}

function arrangeOverlay__buju_u1043(l_p0, n_p1) {
    var offset_536871962 = n_p1.computed.arr[1];
    var space_536871964 = n_p1.computed.arr[3];
    Label1: {
      var idx_536871965 = 0;
      var colontmp__536872491 = 0;
      colontmp__536872491 = ((n_p1.childOffset + n_p1.childCount) >>> 0);
      var res_536872492 = n_p1.childOffset;
      Label2: {
          Label3: while (true) {
          if (!(res_536872492 < colontmp__536872491)) break Label3;
            idx_536871965 = res_536872492;
            var child_536871966 = l_p0.sorted[idx_536871965];
            if (            (((((child_536871966.anchorFlags & 31)) | 0) >> 1) & 5) == 5            ){              child_536871966.computed.arr[3] = max__system_u1192(0.0, ((space_536871964 - child_536871966.computed.arr[1]) - child_536871966.margin.arr[3]));
              }
            else if (            (((((child_536871966.anchorFlags & 31)) | 0) >> 1) & 5) == 4            ){              child_536871966.computed.arr[1] = ((((child_536871966.computed.arr[1] + space_536871964) - child_536871966.computed.arr[3]) - child_536871966.margin.arr[1]) - child_536871966.margin.arr[3]);
              }
            else if (            (((((child_536871966.anchorFlags & 31)) | 0) >> 1) & 5) == 1            ){              }
            else{
              child_536871966.computed.arr[1] = (child_536871966.computed.arr[1] + max__system_u1192(0.0, (((space_536871964 - child_536871966.computed.arr[3]) / 2.0) - child_536871966.margin.arr[3])));
              }
            child_536871966.computed.arr[1] = (child_536871966.computed.arr[1] + offset_536871962);
            res_536872492 = ((res_536872492 + 1) >>> 0);
          }
      };
    };

  
}

function arrange__buju_u918(l_p0, n_p1) {
    if (    (((n_p1.boxFlags & 7)) | 0) == 7    ){      if (true) {
      arrangeStacked__buju_u423(l_p0, n_p1);
      var offset_536871851 = arrangeWrappedOverlaySqueezed__buju_u505(l_p0, n_p1);
      n_p1.computed.arr[2] = (offset_536871851 - n_p1.computed.arr[0]);
      }
      
      }
    else if (    (((n_p1.boxFlags & 7)) | 0) == 6    ){      if (true) {
      (arrangeWrappedOverlaySqueezed__buju_u568(l_p0, n_p1));
      }
      else {
      arrangeStacked__buju_u628(l_p0, n_p1);
      }
      
      }
    else if (    (((n_p1.boxFlags & 7)) | 0) == 3 || 
    (((n_p1.boxFlags & 7)) | 0) == 2    ){      if (((((n_p1.boxFlags & 1)) | 0) == 1)) {
      arrangeStacked__buju_u954(l_p0, n_p1);
      }
      else {
      arrangeOverlaySqueezedRange__buju_u581(l_p0, n_p1.childOffset, ((n_p1.childOffset + n_p1.childCount) >>> 0), n_p1.computed.arr[1], n_p1.computed.arr[3]);
      }
      
      }
    else{
      arrangeOverlay__buju_u1043(l_p0, n_p1);
      }

  
}

function arrange__buju_u905(l_p0) {
    Label1: {
      var idx_536871828 = 0;
      var colontmp__536872480 = 0;
      colontmp__536872480 = (l_p0.sorted).length;
      var i_536872481 = 0;
      Label2: {
          Label3: while (true) {
          if (!(i_536872481 < colontmp__536872480)) break Label3;
            idx_536871828 = i_536872481;
            var n_536871829 = l_p0.sorted[idx_536871828];
            arrange__buju_u918(l_p0, n_536871829);
            if (n_536871829.isSkipXAxis) {
            arrange__buju_u414(l_p0, n_536871829);
            }
            
            i_536872481 += 1;
          }
      };
    };

  
}

function compute__buju_u287(l_p0, n_p1) {
    n_p1.isSkipXAxis = false;
    if (l_p0.sorted.length < 0) { for (var i = l_p0.sorted.length ; i < 0 ; ++i) l_p0.sorted.push(null); }
               else { l_p0.sorted.length = 0; };
    l_p0.sorted.push(n_p1);;
    var idx_536871210 = 0;
    Label1: {
        Label2: while (true) {
        if (!(idx_536871210 < (l_p0.sorted).length)) break Label2;
          var n_536871215 = l_p0.sorted[idx_536871210];
          idx_536871210 += 1;
          n_536871215.childOffset = (l_p0.sorted).length;
          if (((((n_536871215.boxFlags & 7)) | 0) == 7)) {
          n_536871215.isSkipXAxis = true;
          }
          
          n_536871215.isBreak = false;
          var count_536871224 = 0;
          var isSkipXAxis_536871225 = n_536871215.isSkipXAxis;
          Label3: {
            var child_536871226 = null;
            var nodeID_536872404 = n_536871215.firstChild;
            Label4: {
                Label5: while (true) {
                if (!!(isNil__buju_u85(nodeID_536872404))) break Label5;
                  var n_536872406 = l_p0.nodes[((nodeID_536872404 - 1) >>> 0)];
                  nodeID_536872404 = n_536872406.nextSibling;
                  child_536871226 = n_536872406;
                  count_536871224 += 1;
                  l_p0.sorted.push(child_536871226);;
                  child_536871226.isSkipXAxis = isSkipXAxis_536871225;
                }
            };
          };
          n_536871215.childCount = count_536871224;
        }
    };
    calcSize__buju_u326(l_p0);
    arrange__buju_u401(l_p0);
    calcSize__buju_u830(l_p0);
    arrange__buju_u905(l_p0);

  
}

function compute(l_p0, nodeID_p1) {
    var l_536872375 = l_p0;
    var n_536872379 = l_536872375.nodes[((nodeID_p1 - 1) >>> 0)];
    compute__buju_u287(l_536872375, n_536872379);

  
}

function computed(l_p0, nodeID_p1) {
  var result_536872383 = ({arr: new Float32Array(4)});

    var l_536872396 = l_p0;
    var n_536872400 = l_536872396.nodes[((nodeID_p1 - 1) >>> 0)];
    result_536872383 = nimCopy(result_536872383, n_536872400.computed, NTI671089030);

  return result_536872383;

}
